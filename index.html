<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>RPS</title>
  </head>

  <body>
    <script>
      const choices = ["rock", "paper", "scissors"]

      function computerPlay() {
        return choices[Math.random() * choices.length | 0]
      }

      function play(playerSelection, computerSelection) {
        if (playerSelection == null || playerSelection == "") return "Canceled"
        playerSelection = playerSelection.toLowerCase();
        let result = undefined;

        if (choices.includes(playerSelection)) {
          if (playerSelection == computerSelection) {
            result = "Tie";
          } else {
            switch(playerSelection) {
              case "rock":
                if (computerSelection == "paper") {
                  result = "Computer +1";
                } else result = "Player +1";
                break;
              case "paper":
                if (computerSelection == "scissors") {
                  result = "Computer +1";                 
                } else result = "Player +1";
                break;
              case "scissors":
                if (computerSelection == "rock") {
                  result = "Computer +1"             
                } else result = "Player +1"
                break;
            }
          }
          console.log(`Computer chose ${computerSelection} \nPlayer chose ${playerSelection.toLowerCase()}`)
          return result
        } else {
          return "Invalid input"
        }
      }

      function game() {
        let playerScore = 0;
        let computerScore = 0;
        let round = 1;
        while (round <= 5) {
          console.log(`Round ${round}`)
          let playerSelection = prompt("Choose rock, paper or scissors: ")
          let computerSelection = computerPlay()
          let result = play(playerSelection, computerSelection)

          if (result == "Player +1" || result == "Computer +1" || result == "Tie"){
            if (result == "Player +1") {
              ++playerScore;
              console.log(`Player +1 \nPlayer: ${playerScore} Computer: ${computerScore}`);
            } else if (result == "Computer +1"){
              ++computerScore; 
              console.log(`Computer +1 \nPlayer: ${playerScore} Computer: ${computerScore}`)
            } else console.log(`Tie \nPlayer: ${playerScore} Computer: ${computerScore}`)
            round++
          }
        }
        let finalResult;
        switch (true) {
          case (playerScore > computerScore):
            finalResult = "Player wins"
            break;
          case (computerScore > playerScore):
            finalResult = "Computer wins"
            break;
          default:
            finalResult = "Tie"
            break;
        }
        console.log(`Final score: \nPlayer: ${playerScore} Computer: ${computerScore} \n${finalResult}`)
      }

      game()
    </script>
  </body>

  
</html>